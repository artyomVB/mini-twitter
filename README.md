# Для запуска нужен docker-compose

```bash
docker-compose up
```

# Описание приложения
Данный проект представляет собой бэкенд для мини-блога, в котором можно постить текстовые записи, просматривать их, подписываться на других пользователей и таким образом формировать ленту своих новостей. 

Использованные технологии: golang 1.19, Redis, MongoDB, Docker.

Демо: https://drive.google.com/file/d/1ohknQUgGTKK-BcjqkVSRe_yhfHRJmo9w/view?usp=sharing

# Об API

Серверная часть написана на Go. Есть следующие эндпоинты, котрые получают и отдают JSON-ы.

## GET /api/v1/posts/{postId}
Получить конкретный пост по его postId

## POST /api/v1/posts
Создать пост, в query parameters нужно передать User-Id автора поста

## GET /api/v1/users/{userId}/posts
Получить все посты, опубликованные пользователем по его userId

## PATCH /api/v1/posts/{postId}
Изменить пост по его postId. В query parameters передается User-Id и если он не совпадает с айди автора поста, то операция не допускается.

## POST /api/v1/users/{userId}/subscribe
Подписаться на конкретного пользователя по его userId, после этого действия в ленте новостей будут появляться посты этого пользователя

## GET /api/v1/subscriptions
Получить свои подписки

## GET /api/v1/subscribers
Получить своих подписчиков

## GET /api/v1/feed
Получить ленту новостей, то есть посты тех пользователей, на которых подписался пользователь. Лента новостей формируется нетривиально. Наивно этот механизм можно было бы реализовать так: как только пользователь постит сообщение, оно добавляется в ленту каждого из его подписчиков и только после этого ему возвращается 200 ОК. Однако для популярных пользователей такая реализация не была бы удобной, приходилось бы долго ждать пока пост опублиуется. Поэтому решено было использовать асинхронную реализацию этого механизма с использованием очередей сообщений. При создании/модификации поста в очередь отправляется событие, обработчик которого, заполняет в фоновом режиме ленты пользователей. Поэтому у приложения есть два режима работы SERVER и WORKER (передается в переменной окружения). 

